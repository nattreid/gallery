!function(a,n){function i(e){e.removeAttr("style");var i=e.width(),t=e.height(),a=n.innerWidth-30,l=n.innerHeight-30;a<i&&(t/=i/a,i=a),l<t&&(i/=t/l,t=l),e.width(i),e.height(t),n.Gallery.container.centerFixed()}void 0!==n.jQuery?void 0!==n.Dropzone?(n.Dropzone.autoDiscover=!1,n.Gallery={},n.Gallery.viewer,n.Gallery.container,n.Gallery.loaded,n.Gallery.sortable=function(){a(".componentGallery .gallery ul").sortable({placeholder:"ui-state-highlight",opacity:.6,update:function(e,i){var t=[];a(this).find("img").each(function(e){t.push(a(this).data("id"))}),a.nette.ajax(a(this).closest("ul").data("url").replace("jsonArgument",JSON.stringify(t)))}}).disableSelection()},n.Gallery.redrawViewer=function(){this.loaded=!1,this.viewer=a(".componentGallery .gallery .viewer"),this.container=this.viewer.find(".viewer-container"),this.viewer.is(":visible")?this.resize():(this.viewer.css({visibility:"hidden",display:"block"}),this.resize(),this.viewer.css({visibility:"",display:"none"}))},n.Gallery.showViewer=function(){this.viewer.fadeIn()},n.Gallery.resize=function(){if(this.container){var e=this.container.find("img");this.loaded?i(e):e.on("load",function(){n.Gallery.loaded=!0,i(e)})}},a(document).ready(function(){a(".componentGallery .uploader form").each(function(){var e=a(this);e.dropzone({dictDefaultMessage:e.data("dictdefaultmessage"),dictMaxFilesExceeded:e.data("dictmaxfilesexceeded"),dictFallbackMessage:e.data("dictfallbackmessage"),dictFallbackText:e.data("dictfallbacktext"),dictInvalidFileType:e.data("dictinvalidfiletype"),dictFileTooBig:e.data("dictfiletoobig"),dictResponseError:e.data("dictresponseerror"),dictCancelUpload:e.data("dictcancelupload"),dictCancelUploadConfirmation:e.data("dictcanceluploadconfirmation"),dictRemoveFile:e.data("dictremovefile"),acceptedFiles:"image/jpeg,image/png,image/gif",maxFileSize:e.data("max-file-size"),maxFiles:e.data("max-files"),init:function(){this.on("queuecomplete",function(){a.nette.ajax(e.data("refresh-url"))})}})}),n.Gallery.sortable(),a(document).on("click",".componentGallery .buttons .deleteChoosedImage",function(){var e=[],i=a(this).data("url");a('.componentGallery .gallery ul input[type="checkbox"]:checked').each(function(){e.push(a(this).data("id"))}),a.nette.ajax(i.replace("jsonArgument",JSON.stringify(e)))}),a(document).on("click",".componentGallery .gallery ul li img",function(){var e=a(this).closest("li").find('input[type="checkbox"]');e.prop("checked",!e.prop("checked"))}),a(document).on("click",".componentGallery .gallery .viewer .background, .componentGallery .gallery .viewer .viewerClose",function(){a(this).closest(".viewer").fadeOut()}),a(n).on("resize.gallery",function(){n.Gallery.resize()})})):console.error('Plugin "Dropzone.js" required by "gallery.js" is missing!'):console.error('Plugin "jQuery" required by "gallery.js" is missing!')}(jQuery,window);