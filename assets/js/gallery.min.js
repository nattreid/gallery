!function(e,i){return void 0===i.jQuery?void console.error('Plugin "jQuery" required by "gallery.js" is missing!'):void 0===i.Dropzone?void console.error('Plugin "Dropzone.js" required by "gallery.js" is missing!'):(i.Dropzone.autoDiscover=!1,i.Gallery={},i.Gallery.viewer,i.Gallery.container,i.Gallery.loaded,i.Gallery.sortable=function(){e(".componentGallery .gallery ul").sortable({placeholder:"ui-state-highlight",opacity:.6,update:function(i,a){var t=new Array;e(this).find("img").each(function(i){t.push(e(this).data("id"))}),e.nette.ajax(e(this).closest("ul").data("url").replace("jsonArgument",JSON.stringify(t)))}}).disableSelection()},i.Gallery.redrawViewer=function(){this.loaded=!1,this.viewer=e(".componentGallery .gallery .viewer"),this.container=this.viewer.find(".viewer-container"),this.viewer.is(":visible")?this.resize():(this.viewer.css({visibility:"hidden",display:"block"}),this.resize(),this.viewer.css({visibility:"",display:"none"}))},i.Gallery.showViewer=function(){this.viewer.fadeIn()},i.Gallery.resize=function(){function e(){var e=30;a.removeAttr("style");var t=a.width(),l=a.height(),r=i.innerWidth-e,n=i.innerHeight-e;t>r&&(l/=t/r,t=r),l>n&&(t/=l/n,l=n),a.width(t),a.height(l),i.Gallery.container.centerFixed()}if(this.container){var a=this.container.find("img");this.loaded?e():a.load(function(){i.Gallery.loaded=!0,e()})}},void e(document).ready(function(){var a=e(".componentGallery .uploader form");a.dropzone({dictDefaultMessage:a.data("dictdefaultmessage"),dictMaxFilesExceeded:a.data("dictmaxfilesexceeded"),dictFallbackMessage:a.data("dictfallbackmessage"),dictFallbackText:a.data("dictfallbacktext"),dictInvalidFileType:a.data("dictinvalidfiletype"),dictFileTooBig:a.data("dictfiletoobig"),dictResponseError:a.data("dictresponseerror"),dictCancelUpload:a.data("dictcancelupload"),dictCancelUploadConfirmation:a.data("dictcanceluploadconfirmation"),dictRemoveFile:a.data("dictremovefile"),dictMaxFilesExceeded:a.data("dictmaxfilesexceeded"),acceptedFiles:"image/jpeg,image/png,image/gif",maxFileSize:a.data("max-file-size"),maxFiles:a.data("max-files")}),i.Gallery.sortable(),e(document).on("click",".componentGallery .buttons .deleteChoosedImage",function(){var i=new Array,a=e(this).data("url");e('.componentGallery .gallery ul input[type="checkbox"]:checked').each(function(){i.push(e(this).data("id"))}),e.nette.ajax(a.replace("jsonArgument",JSON.stringify(i)))}),e(document).on("click",".componentGallery .gallery ul li img",function(){var i=e(this).closest("li").find('input[type="checkbox"]');i.prop("checked",!i.prop("checked"))}),e(document).on("click",".componentGallery .gallery .viewer .background, .componentGallery .gallery .viewer .viewerClose",function(){e(this).closest(".viewer").fadeOut()}),e(i).on("resize.gallery",function(){i.Gallery.resize()})}))}(jQuery,window);