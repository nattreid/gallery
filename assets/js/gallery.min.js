!function(e,i){void 0===i.jQuery?console.error('Plugin "jQuery" required by "gallery.js" is missing!'):void 0===i.Dropzone?console.error('Plugin "Dropzone.js" required by "gallery.js" is missing!'):(i.Dropzone.autoDiscover=!1,i.Gallery={},i.Gallery.viewer,i.Gallery.container,i.Gallery.loaded,i.Gallery.sortable=function(){e(".componentGallery .gallery ul").sortable({placeholder:"ui-state-highlight",opacity:.6,update:function(i,t){var a=new Array;e(this).find("img").each(function(i){a.push(e(this).data("id"))}),e.nette.ajax(e(this).closest("ul").data("url").replace("jsonArgument",JSON.stringify(a)))}}).disableSelection()},i.Gallery.redrawViewer=function(){this.loaded=!1,this.viewer=e(".componentGallery .gallery .viewer"),this.container=this.viewer.find(".viewer-container"),this.viewer.is(":visible")?this.resize():(this.viewer.css({visibility:"hidden",display:"block"}),this.resize(),this.viewer.css({visibility:"",display:"none"}))},i.Gallery.showViewer=function(){this.viewer.fadeIn()},i.Gallery.resize=function(){function e(){t.removeAttr("style");var e=t.width(),a=t.height(),l=i.innerWidth-30,n=i.innerHeight-30;e>l&&(a/=e/l,e=l),a>n&&(e/=a/n,a=n),t.width(e),t.height(a),i.Gallery.container.centerFixed()}if(this.container){var t=this.container.find("img");this.loaded?e():t.on("load",function(){i.Gallery.loaded=!0,e()})}},e(document).ready(function(){e(".componentGallery .uploader form").each(function(){var i=e(this);i.dropzone({dictDefaultMessage:i.data("dictdefaultmessage"),dictMaxFilesExceeded:i.data("dictmaxfilesexceeded"),dictFallbackMessage:i.data("dictfallbackmessage"),dictFallbackText:i.data("dictfallbacktext"),dictInvalidFileType:i.data("dictinvalidfiletype"),dictFileTooBig:i.data("dictfiletoobig"),dictResponseError:i.data("dictresponseerror"),dictCancelUpload:i.data("dictcancelupload"),dictCancelUploadConfirmation:i.data("dictcanceluploadconfirmation"),dictRemoveFile:i.data("dictremovefile"),dictMaxFilesExceeded:i.data("dictmaxfilesexceeded"),acceptedFiles:"image/jpeg,image/png,image/gif",maxFileSize:i.data("max-file-size"),maxFiles:i.data("max-files"),init:function(){this.on("queuecomplete",function(){e.nette.ajax(i.data("refresh-url"))})}})}),i.Gallery.sortable(),e(document).on("click",".componentGallery .buttons .deleteChoosedImage",function(){var i=new Array,t=e(this).data("url");e('.componentGallery .gallery ul input[type="checkbox"]:checked').each(function(){i.push(e(this).data("id"))}),e.nette.ajax(t.replace("jsonArgument",JSON.stringify(i)))}),e(document).on("click",".componentGallery .gallery ul li img",function(){var i=e(this).closest("li").find('input[type="checkbox"]');i.prop("checked",!i.prop("checked"))}),e(document).on("click",".componentGallery .gallery .viewer .background, .componentGallery .gallery .viewer .viewerClose",function(){e(this).closest(".viewer").fadeOut()}),e(i).on("resize.gallery",function(){i.Gallery.resize()})}))}(jQuery,window);