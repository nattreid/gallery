!function(e,i){return void 0===i.jQuery?void console.error('Plugin "jQuery" required by "gallery.js" is missing!'):void 0===i.Dropzone?void console.error('Plugin "Dropzone.js" required by "gallery.js" is missing!'):(i.Gallery={},i.Gallery.viewer,i.Gallery.container,i.Gallery.loaded,i.Gallery.sortable=function(){e(".componentGallery .gallery ul").sortable({placeholder:"ui-state-highlight",opacity:.6,update:function(i,t){var l=new Array;e(this).find("img").each(function(i){l.push(e(this).data("id"))}),e.nette.ajax(e(this).closest("ul").data("url").replace("jsonArgument",JSON.stringify(l)))}}).disableSelection()},i.Gallery.redrawViewer=function(){this.loaded=!1,this.viewer=e(".componentGallery .gallery .viewer"),this.container=this.viewer.find(".viewer-container"),this.viewer.is(":visible")?this.resize():(this.viewer.css({visibility:"hidden",display:"block"}),this.resize(),this.viewer.css({visibility:"",display:"none"}))},i.Gallery.showViewer=function(){this.viewer.fadeIn()},i.Gallery.resize=function(){function e(){var e=30;t.removeAttr("style");var l=t.width(),a=t.height(),n=i.innerWidth-e,r=i.innerHeight-e;l>n&&(a/=l/n,l=n),a>r&&(l/=a/r,a=r),t.width(l),t.height(a),i.Gallery.container.centerFixed()}if(this.container){var t=this.container.find("img");this.loaded?e():t.load(function(){i.Gallery.loaded=!0,e()})}},void e(document).ready(function(){e(".componentGallery .uploader form").dropzone({dictMaxFilesExceeded:e(this).data("dictMaxFilesExceeded"),dictFallbackMessage:e(this).data("dictFallbackMessage"),dictFallbackText:e(this).data("dictFallbackText"),dictInvalidFileType:e(this).data("dictInvalidFileType"),dictFileTooBig:e(this).data("dictFileTooBig"),dictResponseError:e(this).data("dictResponseError"),dictCancelUpload:e(this).data("dictCancelUpload"),dictCancelUploadConfirmation:e(this).data("dictCancelUploadConfirmation"),dictRemoveFile:e(this).data("dictRemoveFile"),dictMaxFilesExceeded:e(this).data("dictMaxFilesExceeded")}),i.Gallery.sortable(),e(document).on("click",".componentGallery .buttons .deleteChoosedImage",function(){var i=new Array,t=e(this).data("url");e('.componentGallery .gallery ul input[type="checkbox"]:checked').each(function(){i.push(e(this).data("id"))}),e.nette.ajax(t.replace("jsonArgument",JSON.stringify(i)))}),e(document).on("click",".componentGallery .gallery ul li img",function(){var i=e(this).closest("li").find('input[type="checkbox"]');i.prop("checked",!i.prop("checked"))}),e(document).on("click",".componentGallery .gallery .viewer .background, .componentGallery .gallery .viewer .viewerClose",function(){e(this).closest(".viewer").fadeOut()}),e(i).on("resize.gallery",function(){i.Gallery.resize()})}))}(jQuery,window);