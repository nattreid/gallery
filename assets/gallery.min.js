!function(e,i){return void 0===i.jQuery?void console.error('Plugin "jQuery" required by "gallery.js" is missing!'):void 0===i.moment?void console.error('Plugin "moment.js" required by "gallery.js" is missing!'):void 0===i.plupload?void console.error('Plugin "plupload.js" required by "gallery.js" is missing!'):(e.cachedScript("/js/plupload/"+i.moment.locale()+".js"),i.Gallery={},i.Gallery.viewer,i.Gallery.container,i.Gallery.loaded,i.Gallery.sortable=function(){e(".componentGallery .gallery ul").sortable({placeholder:"ui-state-highlight",opacity:.6,update:function(i,l){var r=new Array;e(this).find("img").each(function(i){r.push(e(this).data("id"))}),e.nette.ajax(e(this).closest("ul").data("url").replace("jsonArgument",JSON.stringify(r)))}}).disableSelection()},i.Gallery.redrawViewer=function(){this.loaded=!1,this.viewer=e(".componentGallery .gallery .viewer"),this.container=this.viewer.find(".viewer-container"),this.viewer.is(":visible")?this.resize():(this.viewer.css({visibility:"hidden",display:"block"}),this.resize(),this.viewer.css({visibility:"",display:"none"}))},i.Gallery.showViewer=function(){this.viewer.fadeIn()},i.Gallery.resize=function(){function e(){var e=30;l.removeAttr("style");var r=l.width(),n=l.height(),t=i.innerWidth-e,o=i.innerHeight-e;r>t&&(n/=r/t,r=t),n>o&&(r/=n/o,n=o),l.width(r),l.height(n),i.Gallery.container.centerFixed()}if(this.container){var l=this.container.find("img");this.loaded?e():l.load(function(){i.Gallery.loaded=!0,e()})}},void e(document).ready(function(){i.Gallery.sortable(),e(document).on("click",".componentGallery .buttons .deleteChoosedImage",function(){var i=new Array,l=e(this).data("url");e('.componentGallery .gallery ul input[type="checkbox"]:checked').each(function(){i.push(e(this).data("id"))}),e.nette.ajax(l.replace("jsonArgument",JSON.stringify(i)))}),e(document).on("click",".componentGallery .gallery ul li img",function(){var i=e(this).closest("li").find('input[type="checkbox"]');i.prop("checked",!i.prop("checked"))}),e(document).on("click",".componentGallery .gallery .viewer .background, .componentGallery .gallery .viewer .viewerClose",function(){e(this).closest(".viewer").fadeOut()}),e(i).on("resize.gallery",function(){i.Gallery.resize()})}))}(jQuery,window);