;(function(b,a){if(a.jQuery===undefined){console.error('Plugin "jQuery" required by "gallery.js" is missing!');return}else{if(a.moment===undefined){console.error('Plugin "moment.js" required by "gallery.js" is missing!');return}else{if(a.plupload===undefined){console.error('Plugin "plupload.js" required by "gallery.js" is missing!');return}}}b.cachedScript("/js/plupload/"+a.moment.locale()+".js");a.Gallery={};a.Gallery.viewer;a.Gallery.container;a.Gallery.loaded;a.Gallery.sortable=function(){b(".componentGallery .gallery ul").sortable({placeholder:"ui-state-highlight",opacity:0.6,update:function(c,e){var d=new Array;b(this).find("img").each(function(f){d.push(b(this).data("id"))});b.nette.ajax(b(this).closest("ul").data("url").replace("jsonArgument",JSON.stringify(d)))}}).disableSelection()};a.Gallery.redrawViewer=function(){this.loaded=false;this.viewer=b(".componentGallery .gallery .viewer");this.container=this.viewer.find(".viewer-container");if(this.viewer.is(":visible")){this.resize()}else{this.viewer.css({visibility:"hidden",display:"block"});this.resize();this.viewer.css({visibility:"",display:"none"})}};a.Gallery.showViewer=function(){this.viewer.fadeIn()};a.Gallery.resize=function(){if(this.container){var c=this.container.find("img");function d(){var f=30;c.removeAttr("style");var h=c.width();var e=c.height();var g=a.innerWidth-f;var i=a.innerHeight-f;if(h>g){e=e/(h/g);h=g}if(e>i){h=h/(e/i);e=i}c.width(h);c.height(e);a.Gallery.container.centerFixed()}if(this.loaded){d()}else{c.load(function(){a.Gallery.loaded=true;d()})}}};b(document).ready(function(){a.Gallery.sortable();b(document).on("click",".componentGallery .buttons .deleteChoosedImage",function(){var d=new Array;var c=b(this).data("url");b('.componentGallery .gallery ul input[type="checkbox"]:checked').each(function(){d.push(b(this).data("id"))});b.nette.ajax(c.replace("jsonArgument",JSON.stringify(d)))});b(document).on("click",".componentGallery .gallery ul li img",function(){var c=b(this).closest("li").find('input[type="checkbox"]');c.prop("checked",!c.prop("checked"))});b(document).on("click",".componentGallery .gallery .viewer .background, .componentGallery .gallery .viewer .viewerClose",function(){b(this).closest(".viewer").fadeOut()});b(a).on("resize.gallery",function(){a.Gallery.resize()})})})(jQuery,window);