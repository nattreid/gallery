function Gallery(){}Gallery.viewer;Gallery.container;Gallery.loaded;Gallery.sortable=function(){$(".componentGallery .gallery ul").sortable({placeholder:"ui-state-highlight",opacity:0.6,update:function(a,c){var b=new Array;$(this).find("img").each(function(d){b.push($(this).data("id"))});$.nette.ajax($(this).closest("ul").data("url").replace("jsonArgument",JSON.stringify(b)))}}).disableSelection()};Gallery.redrawViewer=function(){this.loaded=false;this.viewer=$(".componentGallery .gallery .viewer");this.container=this.viewer.find(".viewer-container");if(this.viewer.is(":visible")){this.resize()}else{this.viewer.css({visibility:"hidden",display:"block"});this.resize();this.viewer.css({visibility:"",display:"none"})}};Gallery.showViewer=function(){this.viewer.fadeIn()};Gallery.resize=function(){if(this.container){var a=this.container.find("img");function b(){var d=30;a.removeAttr("style");var f=a.width();var c=a.height();var e=window.innerWidth-d;var g=window.innerHeight-d;if(f>e){c=c/(f/e);f=e}if(c>g){f=f/(c/g);c=g}a.width(f);a.height(c);Gallery.container.centerFixed()}if(this.loaded){b()}else{a.load(function(){Gallery.loaded=true;b()})}}};$(document).ready(function(){if(window.moment===undefined){console.error('Plugin "moment.js" required by "gallery.js" is missing!');return}else{if(window.plupload===undefined){console.error('Plugin "plupload.js" required by "gallery.js" is missing!');return}}$.cachedScript("/js/plupload/"+window.moment.locale()+".js");Gallery.sortable();$(document).on("click",".componentGallery .buttons .deleteChoosedImage",function(){var b=new Array;var a=$(this).data("url");$('.componentGallery .gallery ul input[type="checkbox"]:checked').each(function(){b.push($(this).data("id"))});$.nette.ajax(a.replace("jsonArgument",JSON.stringify(b)))});$(document).on("click",".componentGallery .gallery ul li img",function(){var a=$(this).closest("li").find('input[type="checkbox"]');a.prop("checked",!a.prop("checked"))});$(document).on("click",".componentGallery .gallery .viewer .background, .componentGallery .gallery .viewer .viewerClose",function(){$(this).closest(".viewer").fadeOut()});$(window).on("resize.gallery",function(){Gallery.resize()})});